% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/foodweb_builder.R
\name{build_local_foodweb}
\alias{build_local_foodweb}
\title{Build a Local Food Web from a Global Metaweb for All Local Units}
\usage{
build_local_foodweb(
  ind_measure,
  local_id,
  metaweb,
  tab_size_classes,
  num_classes,
  selected_resources
)
}
\arguments{
\item{ind_measure}{A data frame of individual-level measurements containing
at least the columns specified by \code{local_id}, \code{species_code}, and \code{size}.
Each row represents an observed individual in the local community.}

\item{local_id}{A character string giving the name of the column in
\code{ind_measure} that defines the local sampling units (e.g. \code{"site_id"},
\code{"operation_id"}).}

\item{metaweb}{A global metaweb adjacency matrix (as produced by
\code{\link[=build_metaweb]{build_metaweb()}}) representing all potential interactions among
trophic species and resources.}

\item{tab_size_classes}{A data frame of size‐class boundaries for each
species, typically generated by \code{\link[=compute_size_classes]{compute_size_classes()}}. Must include
a \code{species_code} column and class bounds.}

\item{num_classes}{Integer indicating the number of size classes per
species, matching the value used in \code{\link[=build_metaweb]{build_metaweb()}}.}

\item{selected_resources}{Character vector of resource nodes to keep in each
local food web.}
}
\value{
A named list of local food webs.
Each element is a square adjacency matrix, and names correspond to unique
values of \code{ind_measure[[local_id]]}.
}
\description{
Builds a local food web (subnetwork) from a global metaweb \strong{for each}
local sampling unit present in \code{ind_measure}, as defined by the column
given in \code{local_id}.

For each local unit, the function identifies which trophic species
(species–size‐class combinations) are represented locally based on
individual sizes, then subsets the global metaweb accordingly.
}
\details{
For each local unit, the function:
\enumerate{
\item Extracts the individuals belonging to that unit.
\item Determines the represented trophic species using size-class boundaries.
\item Subsets the metaweb to keep only present trophic species + resources.
}
}
\examples{
\dontrun{
# Minimal reproducible example :

# Suppose you already built:
#  - a global metaweb object named `metaweb`
#  - a table of size classes named `size_classes`
#  - an individual measurement table `ind_measure`

local_foodwebs <- build_local_foodweb(
  ind_measure      = ind_measure,
  local_id         = "operation_id",
  metaweb          = metaweb,
  tab_size_classes = size_classes,
  num_classes      = 5,
  selected_resources = c("zoopl", "phytopl")
)

names(local_foodwebs)
dim(local_foodwebs[[1]])
}

}
\seealso{
\code{\link[=build_metaweb]{build_metaweb()}}, \code{\link[=compute_size_classes]{compute_size_classes()}}
}
