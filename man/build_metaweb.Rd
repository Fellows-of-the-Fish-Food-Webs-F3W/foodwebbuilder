% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metaweb_builder.R
\name{build_metaweb}
\alias{build_metaweb}
\title{Build a Metaweb Interaction Network}
\usage{
build_metaweb(tab_size_classes, pred_win, num_classes, selected_resources)
}
\arguments{
\item{tab_size_classes}{A data frame of size‐class boundaries for each
species, typically produced by \code{\link[=compute_size_classes]{compute_size_classes()}}. Must contain a
\code{species_code} column and the lower and upper bounds for each size class.}

\item{pred_win}{A data frame describing the predator–prey window for each
species, including columns \code{species_code}, \code{beta_min}, and \code{beta_max},
defining the lower and upper ratios of prey to predator body size.}

\item{num_classes}{Integer indicating the number of size classes per species,
matching the value used in \code{\link[=compute_size_classes]{compute_size_classes()}}.}

\item{selected_resources}{Character vector giving the names of resource
types (columns) to include in the metaweb.}
}
\value{
A square adjacency matrix (data frame or matrix) representing all potential
trophic interactions among trophic species (size classes) and resources.
Rows correspond to prey items and columns to consumers.
}
\description{
Constructs a complete metaweb—an integrated species interaction network—
by combining size‐class information, predator–prey relationships, and
resource links. The resulting matrix describes all potential trophic
interactions among size‐structured fish species and their resources.
}
\details{
The function proceeds through several steps:
\enumerate{
\item Defines \emph{trophic species} as combinations of species and size classes.
\item Computes prey size‐class limits using the predator–prey window parameters.
\item Assembles fish–fish interaction matrices based on size overlap and
piscivory status.
\item Builds resource–fish and resource–resource interaction matrices.
\item Combines all matrices into a single metaweb adjacency matrix.
}

The function assumes the existence of supporting dietary information
(e.g., \code{fish_diet_shift} and \code{resource_diet_shift}) available in the current
environment.
}
\examples{
\dontrun{
metaweb <- build_metaweb(
  tab_size_classes = size_classes,
  pred_win = predation_window,
  num_classes = 5,
  selected_resources = c("zooplankton", "benthos")
)
dim(metaweb)
}

}
\seealso{
\code{\link[=remove_missing_species]{remove_missing_species()}}, \code{\link[=compute_size_classes]{compute_size_classes()}}
}
