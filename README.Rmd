---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# foodwebbuilder

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://lifecycle.r-lib.org/articles/stages.html#experimental)
[![CRAN status](https://www.r-pkg.org/badges/version/foodwebbuilder)](https://CRAN.R-project.org/package=foodwebbuilder)
<!-- badges: end -->

<div align="justify">
The goal of `foodwebbuilder` is to reconstruct local fish food-web structures that account for intraspecific diet variation, by integrating both taxonomic identity and body size. This package provides tools and example datasets to reproduce and explore trophic network construction as described in Bonnaffé *et al.* (2021) and Danet *et al.* (2021).

## Installation
You can install the **development version** of *foodwebbuilder* from GitHub with:

``` r
# install.packages("devtools")
devtools::install_github("Fellows-of-the-Fish-Food-Webs-F3W/foodwebbuilder")
```
*note that the package is not available on CRAN.*

## Included datasets
The package includes several datasets used to illustrate trophic network reconstruction.

| Dataset | Description | Rows × Cols |
|----------|--------------|-------------|
| `ind_measure` | Individual fish measurements | 282 × 7 |
| `fish_diet_shift` | Ontogenetic diet shifts by fish species and size class | 154 × 14 |
| `pred_win` | Predation window parameters defining size-dependent piscivory | 61 × 9 |
| `resource_diet_shift` | Resource diet composition assumed for basal taxa | 9 × 14 |

The `ind_measure` dataset originates from the **ASPE** database (via the `fishdatabuilder` package), while `fish_diet_shift`, `pred_win`, and `resource_diet_shift` are derived from Bonnaffé *et al.* (2021).  
All datasets are provided as reproducible examples for building size-structured trophic networks.

## Quick look at the datasets
You can load and explore the datasets directly using `data()`:

```{r example}
library(foodwebbuilder)

data(ind_measure)
head(ind_measure)

data(fish_diet_shift)
head(fish_diet_shift)

data(pred_win)
head(pred_win)

data(resource_diet_shift)
head(resource_diet_shift)
```

## Workflow overview

The `foodwebbuilder` package follows a two-step approach:

1. **Reconstruction of the trophic metaweb** – the comprehensive network of potential feeding links among all taxa in the dataset, accounting for intraspecific diet variation.

2. **Extraction of local food-webs** – site- and time-specific networks derived from the metaweb, including only species recorded at each sampling event.

## Step 1 – Reconstructing the trophic metaweb
*To complete*

## Step 2 – Reconstructing local food-webs
*To complete*

## References
- Bonnaffé, C., Danet, A., *et al.* (2021). Comparison of size-structured and species-level trophic networks reveals antagonistic effects of temperature on vertical trophic diversity at the population and species level. *Oikos*, 130, 1297–1309. **doi:** [10.1111/oik.08173](https://doi.org/10.1111/oik.08173)
- Danet, A., Bonnaffé, C., *et al.* (2021).  Species richness and food-web structure jointly drive community biomass and its temporal stability in fish communities. *Ecology Letters*, 24, 2364–2377. **doi:** [10.1111/ele.13857](https://doi.org/10.1111/ele.13857)

## License
GPL-3 © Fellows of the Fish Food Webs (F<sup>3</sup>W) Project
</div>
